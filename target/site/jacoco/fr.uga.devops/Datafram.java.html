<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>Datafram.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">datafram-app</a> &gt; <a href="index.source.html" class="el_package">fr.uga.devops</a> &gt; <span class="el_source">Datafram.java</span></div><h1>Datafram.java</h1><pre class="source lang-java linenums">package fr.uga.devops;
import java.io.File;
import java.lang.reflect.Type;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.HashMap;
import java.lang.reflect.Method;
import java.util.Scanner;
public class Datafram{

    ArrayList&lt;Colonne&gt; datafram;

<span class="fc" id="L13">    public Datafram(Integer[] tab,String label){</span>
        Colonne col;
<span class="fc" id="L15">        ArrayList&lt;Integer&gt; arr = new ArrayList&lt;Integer&gt;();</span>
<span class="fc bfc" id="L16" title="All 2 branches covered.">        for(int i=0;i&lt;tab.length;i++){</span>
<span class="fc" id="L17">            arr.add(tab[i]);</span>
        }
<span class="fc" id="L19">        col = new Colonne(label,&quot;Integer&quot;,arr);</span>
<span class="fc" id="L20">        datafram = new ArrayList&lt;Colonne&gt;();        </span>
<span class="fc" id="L21">        datafram.add(col);</span>
<span class="fc" id="L22">    }</span>

<span class="fc" id="L24">    public Datafram(String[] tab,String label){</span>
        Colonne col;
<span class="fc" id="L26">        ArrayList&lt;String&gt; arr = new ArrayList&lt;String&gt;();</span>
<span class="fc bfc" id="L27" title="All 2 branches covered.">        for(int i=0;i&lt;tab.length;i++){</span>
<span class="fc" id="L28">            arr.add(tab[i]);</span>
        }
<span class="fc" id="L30">        col = new Colonne(label,&quot;String&quot;,arr);</span>
<span class="fc" id="L31">        datafram = new ArrayList&lt;Colonne&gt;();        </span>
<span class="fc" id="L32">        datafram.add(col);</span>
<span class="fc" id="L33">    }</span>

<span class="fc" id="L35">    public Datafram(Object[][] tab,String[] label,String[] type) throws Exception{</span>
        Colonne col;
<span class="fc" id="L37">        datafram = new ArrayList&lt;Colonne&gt;(); </span>
<span class="fc bfc" id="L38" title="All 2 branches covered.">        for(int i=0;i&lt;tab.length;i++){</span>
<span class="fc bfc" id="L39" title="All 2 branches covered.">            if(type[i].equals(&quot;Integer&quot;)){</span>
<span class="fc" id="L40">                ArrayList&lt;Integer&gt; arr = new ArrayList&lt;Integer&gt;();</span>
<span class="fc bfc" id="L41" title="All 2 branches covered.">                for(int j=0;j&lt;tab[i].length;j++){</span>
<span class="fc" id="L42">                    arr.add((Integer)tab[i][j]);</span>
                }
<span class="fc" id="L44">                col = new Colonne(label[i],&quot;Integer&quot;,arr);</span>
<span class="fc" id="L45">                datafram.add(col);</span>
<span class="pc bpc" id="L46" title="1 of 2 branches missed.">            }else if(type[i].equals(&quot;String&quot;)){</span>
<span class="fc" id="L47">                ArrayList&lt;String&gt; arr = new ArrayList&lt;String&gt;();</span>
<span class="fc bfc" id="L48" title="All 2 branches covered.">                for(int j=0;j&lt;tab[i].length;j++){</span>
<span class="fc" id="L49">                    arr.add((String)tab[i][j]);</span>
                }
<span class="fc" id="L51">                col = new Colonne(label[i],&quot;String&quot;,arr);</span>
<span class="fc" id="L52">                datafram.add(col);</span>
<span class="fc" id="L53">            }else{</span>
<span class="nc" id="L54">                throw new Exception(&quot;Type non supporte&quot;);</span>
            }
            
        }
<span class="fc" id="L58">    }</span>

<span class="fc" id="L60">    public Datafram(String filename){</span>
        try{

<span class="fc" id="L63">            datafram = new ArrayList&lt;Colonne&gt;();</span>
<span class="fc" id="L64">            File getCSVFiles = new File(filename);</span>
<span class="fc" id="L65">            Scanner sc = new Scanner(getCSVFiles);</span>
            // sc.useDelimiter(&quot;,&quot;);
<span class="fc" id="L67">            int i =0;</span>
<span class="fc" id="L68">            String text =&quot;&quot;;</span>
            String line;
            Scanner scLine;
            //Creation des colonnes avec les types
<span class="fc" id="L72">            int nbCol = 0;</span>

<span class="fc" id="L74">            line = sc.nextLine();</span>
<span class="fc" id="L75">            scLine = new Scanner(line);</span>
<span class="fc" id="L76">            scLine.useDelimiter(&quot;,&quot;);</span>
                //System.out.println(line);
<span class="fc bfc" id="L78" title="All 2 branches covered.">            while(scLine.hasNext()){</span>
<span class="fc" id="L79">                text = scLine.next();</span>
<span class="fc" id="L80">                text = text.replaceAll(&quot;\\R&quot;, &quot;&quot;);</span>
                Colonne col;
<span class="fc bfc" id="L82" title="All 2 branches covered.">                if(text.equals(&quot;String&quot;)){</span>
<span class="fc" id="L83">                    col = new Colonne&lt;String&gt;();</span>
<span class="pc bpc" id="L84" title="1 of 2 branches missed.">                }else if(text.equals(&quot;Integer&quot;)){</span>
<span class="fc" id="L85">                    col = new Colonne&lt;Integer&gt;();                        </span>
<span class="fc" id="L86">                    col.setType(&quot;Integer&quot;);</span>
                    
                }else{
<span class="nc" id="L89">                    col = new Colonne&lt;&gt;();</span>
                }
<span class="fc" id="L91">                datafram.add(col);</span>
<span class="fc" id="L92">                i++;</span>
<span class="fc" id="L93">            }</span>
            
<span class="fc" id="L95">            nbCol = i;</span>
<span class="fc" id="L96">            i=0;</span>
            //Creation des labels
<span class="fc" id="L98">            line = sc.nextLine();</span>
<span class="fc" id="L99">            scLine = new Scanner(line);</span>
<span class="fc" id="L100">            scLine.useDelimiter(&quot;,&quot;);</span>
<span class="fc bfc" id="L101" title="All 2 branches covered.">            while(scLine.hasNext()){</span>
<span class="fc" id="L102">                text = scLine.next();</span>
<span class="fc" id="L103">                text = text.replaceAll(&quot;\\R&quot;, &quot;&quot;);</span>
<span class="fc" id="L104">                Colonne col = datafram.get(i);</span>
<span class="fc" id="L105">                col.setLabel(text);</span>
<span class="fc" id="L106">                i++;</span>
<span class="fc" id="L107">            }</span>
            
            
<span class="fc" id="L110">            i=0;</span>
<span class="fc" id="L111">            sc.useDelimiter(&quot;,|\\n&quot;);</span>

<span class="fc bfc" id="L113" title="All 2 branches covered.">            while(sc.hasNext()){</span>
<span class="fc" id="L114">                text = sc.next();</span>
<span class="fc" id="L115">                text = text.replaceAll(&quot;\\R&quot;, &quot;&quot;);</span>
<span class="fc bfc" id="L116" title="All 2 branches covered.">                if(i == nbCol){</span>
<span class="fc" id="L117">                    i=0;</span>
                }
                
                
<span class="fc" id="L121">                Colonne col2 = datafram.get(i);</span>
<span class="fc bfc" id="L122" title="All 2 branches covered.">                if(col2.getType().equals(&quot;Integer&quot;)){</span>
<span class="fc" id="L123">                    col2.add(Integer.parseInt(text));</span>
<span class="pc bpc" id="L124" title="1 of 2 branches missed.">                }else if(col2.getType().equals(&quot;String&quot;)){</span>
<span class="fc" id="L125">                    col2.add(text);</span>
                }
<span class="fc" id="L127">                i++;</span>
                
<span class="fc" id="L129">            }</span>
<span class="fc" id="L130">            sc.close(); </span>
<span class="nc" id="L131">        }catch(Exception e){</span>
<span class="nc" id="L132">            e.printStackTrace();</span>
<span class="fc" id="L133">        }</span>
<span class="fc" id="L134">        }</span>
        
    public ArrayList&lt;Colonne&gt; newDatafram(ArrayList&lt;Colonne&gt; datafram, String line, String col){
<span class="fc" id="L137">        ArrayList&lt;Colonne&gt; datafram2 = new ArrayList&lt;&gt;();</span>
<span class="fc" id="L138">        Scanner scline = new Scanner(line);</span>
<span class="fc" id="L139">        scline.useDelimiter(&quot;,&quot;);</span>
        String text;
<span class="fc" id="L141">        ArrayList&lt;String&gt; TabLine = new ArrayList&lt;&gt;();</span>
<span class="fc bfc" id="L142" title="All 2 branches covered.">        while(scline.hasNext()){</span>
<span class="fc" id="L143">            text = scline.next();</span>
<span class="fc" id="L144">            TabLine.add(text);</span>
        }

<span class="fc" id="L147">        Scanner scCol = new Scanner(col);</span>
<span class="fc" id="L148">        scCol.useDelimiter(&quot;,&quot;);</span>
<span class="fc" id="L149">        ArrayList&lt;String&gt; TabIndex = new ArrayList&lt;&gt;();</span>
<span class="fc bfc" id="L150" title="All 2 branches covered.">        while(scCol.hasNext()){</span>
<span class="fc" id="L151">            text = scCol.next();</span>
<span class="fc" id="L152">            TabIndex.add(text);</span>
        }

<span class="fc bfc" id="L155" title="All 2 branches covered.">        for(int i = 0; i &lt; TabIndex.size(); i++){</span>
<span class="fc" id="L156">            int k = 0;</span>
<span class="fc bfc" id="L157" title="All 2 branches covered.">            while(!(datafram.get(k).getLabel().equals(TabIndex.get(i)))){</span>
<span class="fc" id="L158">                k++;</span>
            }
<span class="fc" id="L160">            Colonne c = datafram.get(k);</span>
<span class="fc" id="L161">            Colonne newC = new Colonne(c.getLabel());</span>
<span class="fc" id="L162">            newC.setType(c.getType());</span>
<span class="fc" id="L163">            newC.setLabel(c.getLabel());</span>

<span class="fc bfc" id="L165" title="All 2 branches covered.">            for(int j = 0; j &lt; TabLine.size(); j++){</span>
<span class="fc" id="L166">                newC.add(c.get(Integer.parseInt(TabLine.get(j))-1));</span>
            }
<span class="fc" id="L168">            datafram2.add(newC);</span>
        }
<span class="fc" id="L170">        printf(datafram2);</span>
<span class="fc" id="L171">        return datafram2;</span>
    }


        public void printf(ArrayList&lt;Colonne&gt; dat){
            //On suppose que les colonnes font toutes la meme taille
<span class="fc" id="L177">            String titleTemplate = &quot;%-20s &quot;;</span>
<span class="fc" id="L178">            int columnSize = dat.get(0).getSize();</span>
<span class="fc" id="L179">            int nbColonnes = dat.size();</span>
            int currentLine;

            //On parcours chaque ligne de chaque colonne et on l'affiche
            //Affichage des label
<span class="fc bfc" id="L184" title="All 2 branches covered.">            for(int i=0;i&lt;nbColonnes;i++){</span>
<span class="fc" id="L185">                String label = dat.get(i).getLabel();</span>
<span class="fc" id="L186">                System.out.printf(titleTemplate,label+&quot; &quot;);</span>
            }
<span class="fc" id="L188">            System.out.println();</span>

            //Affichages des colonnes            
<span class="fc bfc" id="L191" title="All 2 branches covered.">            for(currentLine=0;currentLine&lt;columnSize;currentLine++){</span>
<span class="fc bfc" id="L192" title="All 2 branches covered.">                for(int j=0;j&lt;nbColonnes;j++){</span>
<span class="fc" id="L193">                    System.out.printf(titleTemplate,dat.get(j).get(currentLine));</span>
                }
<span class="fc" id="L195">                System.out.println();</span>
                
            }
<span class="fc" id="L198">        }</span>

        //Affiche les 5 dernieres lignes
        public void tail(){
<span class="fc" id="L202">            String titleTemplate = &quot;%-20s &quot;;</span>
<span class="fc" id="L203">            int columnSize = datafram.get(0).getSize();</span>
<span class="fc" id="L204">            int nbColonnes = datafram.size();</span>
            int currentLine;

            //On parcours chaque ligne de chaque colonne et on l'affiche
            //Affichage des label
<span class="fc bfc" id="L209" title="All 2 branches covered.">            for(int i=0;i&lt;nbColonnes;i++){</span>
<span class="fc" id="L210">                String label = datafram.get(i).getLabel();</span>
<span class="fc" id="L211">                System.out.printf(titleTemplate,label+&quot; &quot;);</span>
            }
<span class="fc" id="L213">            System.out.println();</span>

            //Affichages des colonnes            
<span class="fc bfc" id="L216" title="All 2 branches covered.">            for(currentLine=columnSize-5;currentLine&lt;columnSize;currentLine++){</span>
<span class="fc bfc" id="L217" title="All 2 branches covered.">                for(int j=0;j&lt;nbColonnes;j++){</span>
<span class="fc" id="L218">                    System.out.printf(titleTemplate,datafram.get(j).get(currentLine));</span>
                }
<span class="fc" id="L220">                System.out.println();</span>
                
            }

<span class="fc" id="L224">        }</span>

        //Affiche les n dernieres lignes
        public void tail(int n){
<span class="fc" id="L228">            String titleTemplate = &quot;%-20s &quot;;</span>
<span class="fc" id="L229">            int columnSize = datafram.get(0).getSize();</span>
<span class="fc" id="L230">            int nbColonnes = datafram.size();</span>
            int currentLine;

            //On parcours chaque ligne de chaque colonne et on l'affiche
            //Affichage des label
<span class="fc bfc" id="L235" title="All 2 branches covered.">            for(int i=0;i&lt;nbColonnes;i++){</span>
<span class="fc" id="L236">                String label = datafram.get(i).getLabel();</span>
<span class="fc" id="L237">                System.out.printf(titleTemplate,label+&quot; &quot;);</span>
            }
<span class="fc" id="L239">            System.out.println();</span>

            //Verification index &gt;0
<span class="fc" id="L242">            int resOk = columnSize-n;</span>
<span class="fc bfc" id="L243" title="All 2 branches covered.">            if(resOk&lt;0){</span>
<span class="fc" id="L244">                resOk=0;</span>
            }   
            //Affichages des colonnes    
<span class="fc bfc" id="L247" title="All 2 branches covered.">            for(currentLine=resOk;currentLine&lt;columnSize;currentLine++){</span>
<span class="fc bfc" id="L248" title="All 2 branches covered.">                for(int j=0;j&lt;nbColonnes;j++){</span>
<span class="fc" id="L249">                    System.out.printf(titleTemplate,datafram.get(j).get(currentLine));</span>
                }
<span class="fc" id="L251">                System.out.println();</span>
                
            }

<span class="fc" id="L255">        }</span>

        //Affiche les 5 premieres lignes
        public void head(){
<span class="fc" id="L259">            String titleTemplate = &quot;%-20s &quot;;</span>
<span class="fc" id="L260">            int columnSize = datafram.get(0).getSize();</span>
<span class="pc bpc" id="L261" title="1 of 2 branches missed.">            if(columnSize&gt;5){</span>
<span class="nc" id="L262">                columnSize=5;</span>
            }
<span class="fc" id="L264">            int nbColonnes = datafram.size();</span>
            
            int currentLine;

            //On parcours chaque ligne de chaque colonne et on l'affiche
            //Affichage des label
<span class="fc bfc" id="L270" title="All 2 branches covered.">            for(int i=0;i&lt;nbColonnes;i++){</span>
<span class="fc" id="L271">                String label = datafram.get(i).getLabel();</span>
<span class="fc" id="L272">                System.out.printf(titleTemplate,label+&quot; &quot;);</span>
            }
<span class="fc" id="L274">            System.out.println();</span>

            //Affichages des colonnes            
<span class="fc bfc" id="L277" title="All 2 branches covered.">            for(currentLine=0;currentLine&lt;columnSize;currentLine++){</span>
<span class="fc bfc" id="L278" title="All 2 branches covered.">                for(int j=0;j&lt;nbColonnes;j++){</span>
<span class="fc" id="L279">                    System.out.printf(titleTemplate,datafram.get(j).get(currentLine));</span>
                }
<span class="fc" id="L281">                System.out.println();</span>
                
            }

<span class="fc" id="L285">        }</span>

        //Affiche les n premieres lignes
        public void head(int n){
<span class="fc" id="L289">            String titleTemplate = &quot;%-20s &quot;;</span>
<span class="fc" id="L290">            int columnSize = datafram.get(0).getSize();;</span>
<span class="fc bfc" id="L291" title="All 2 branches covered.">            if(n&lt;columnSize){</span>
<span class="fc" id="L292">                columnSize = n;</span>
            }
<span class="fc" id="L294">            int nbColonnes = datafram.size();</span>
            int currentLine;

            //On parcours chaque ligne de chaque colonne et on l'affiche
            //Affichage des label
<span class="fc bfc" id="L299" title="All 2 branches covered.">            for(int i=0;i&lt;nbColonnes;i++){</span>
<span class="fc" id="L300">                String label = datafram.get(i).getLabel();</span>
<span class="fc" id="L301">                System.out.printf(titleTemplate,label+&quot; &quot;);</span>
            }
<span class="fc" id="L303">            System.out.println();</span>

            //Affichages des colonnes            
<span class="fc bfc" id="L306" title="All 2 branches covered.">            for(currentLine=0;currentLine&lt;columnSize;currentLine++){</span>
<span class="fc bfc" id="L307" title="All 2 branches covered.">                for(int j=0;j&lt;nbColonnes;j++){</span>
<span class="fc" id="L308">                    System.out.printf(titleTemplate,datafram.get(j).get(currentLine));</span>
                }
<span class="fc" id="L310">                System.out.println();</span>
                
            }

<span class="fc" id="L314">        }</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.6.202009150832</span></div></body></html>