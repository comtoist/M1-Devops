<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="fr"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>Datafram.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">datafram-app</a> &gt; <a href="index.source.html" class="el_package">fr.uga.devops</a> &gt; <span class="el_source">Datafram.java</span></div><h1>Datafram.java</h1><pre class="source lang-java linenums">package fr.uga.devops;
import java.io.File;
import java.lang.reflect.Type;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.HashMap;
import java.lang.reflect.Method;
import java.util.Scanner;
public class Datafram{

    ArrayList&lt;Colonne&gt; datafram;

<span class="fc" id="L13">    public Datafram(Integer[] tab,String label){</span>
        Colonne col;
<span class="fc" id="L15">        ArrayList&lt;Integer&gt; arr = new ArrayList&lt;Integer&gt;();</span>
<span class="fc bfc" id="L16" title="All 2 branches covered.">        for(int i=0;i&lt;tab.length;i++){</span>
<span class="fc" id="L17">            arr.add(tab[i]);</span>
        }
<span class="fc" id="L19">        col = new Colonne(label,&quot;Integer&quot;,arr);</span>
<span class="fc" id="L20">        datafram = new ArrayList&lt;Colonne&gt;();        </span>
<span class="fc" id="L21">        datafram.add(col);</span>
<span class="fc" id="L22">    }</span>

<span class="fc" id="L24">    public Datafram(String[] tab,String label){</span>
        Colonne col;
<span class="fc" id="L26">        ArrayList&lt;String&gt; arr = new ArrayList&lt;String&gt;();</span>
<span class="fc bfc" id="L27" title="All 2 branches covered.">        for(int i=0;i&lt;tab.length;i++){</span>
<span class="fc" id="L28">            arr.add(tab[i]);</span>
        }
<span class="fc" id="L30">        col = new Colonne(label,&quot;String&quot;,arr);</span>
<span class="fc" id="L31">        datafram = new ArrayList&lt;Colonne&gt;();        </span>
<span class="fc" id="L32">        datafram.add(col);</span>
<span class="fc" id="L33">    }</span>

<span class="fc" id="L35">    public Datafram(Object[][] tab,String[] label,String[] type) throws Exception{</span>
        Colonne col;
<span class="fc" id="L37">        datafram = new ArrayList&lt;Colonne&gt;(); </span>
<span class="fc bfc" id="L38" title="All 2 branches covered.">        for(int i=0;i&lt;tab.length;i++){</span>
<span class="fc bfc" id="L39" title="All 2 branches covered.">            if(type[i].equals(&quot;Integer&quot;)){</span>
<span class="fc" id="L40">                ArrayList&lt;Integer&gt; arr = new ArrayList&lt;Integer&gt;();</span>
<span class="fc bfc" id="L41" title="All 2 branches covered.">                for(int j=0;j&lt;tab[i].length;j++){</span>
<span class="fc" id="L42">                    arr.add((Integer)tab[i][j]);</span>
                }
<span class="fc" id="L44">                col = new Colonne(label[i],&quot;Integer&quot;,arr);</span>
<span class="fc" id="L45">                datafram.add(col);</span>
<span class="pc bpc" id="L46" title="1 of 2 branches missed.">            }else if(type[i].equals(&quot;String&quot;)){</span>
<span class="fc" id="L47">                ArrayList&lt;String&gt; arr = new ArrayList&lt;String&gt;();</span>
<span class="fc bfc" id="L48" title="All 2 branches covered.">                for(int j=0;j&lt;tab[i].length;j++){</span>
<span class="fc" id="L49">                    arr.add((String)tab[i][j]);</span>
                }
<span class="fc" id="L51">                col = new Colonne(label[i],&quot;String&quot;,arr);</span>
<span class="fc" id="L52">                datafram.add(col);</span>
<span class="fc" id="L53">            }else{</span>
<span class="nc" id="L54">                throw new Exception(&quot;Type non supporte&quot;);</span>
            }
            
        }
<span class="fc" id="L58">    }</span>

<span class="fc" id="L60">    public Datafram(String filename){</span>
        try{

<span class="fc" id="L63">            datafram = new ArrayList&lt;Colonne&gt;();</span>
<span class="fc" id="L64">            File getCSVFiles = new File(filename);</span>
<span class="fc" id="L65">            Scanner sc = new Scanner(getCSVFiles);</span>
            // sc.useDelimiter(&quot;,&quot;);
<span class="fc" id="L67">            int i =0;</span>
<span class="fc" id="L68">            String text =&quot;&quot;;</span>
            String line;
            Scanner scLine;
            //Creation des colonnes avec les types
<span class="fc" id="L72">            int nbCol = 0;</span>

<span class="fc" id="L74">            line = sc.nextLine();</span>
<span class="fc" id="L75">            scLine = new Scanner(line);</span>
<span class="fc" id="L76">            scLine.useDelimiter(&quot;,&quot;);</span>
                //System.out.println(line);
<span class="fc bfc" id="L78" title="All 2 branches covered.">            while(scLine.hasNext()){</span>
<span class="fc" id="L79">                text = scLine.next();</span>
                Colonne col;
<span class="fc bfc" id="L81" title="All 2 branches covered.">                if(text.equals(&quot;String&quot;)){</span>
<span class="fc" id="L82">                    col = new Colonne&lt;String&gt;();</span>
<span class="pc bpc" id="L83" title="1 of 2 branches missed.">                }else if(text.equals(&quot;Integer&quot;)){</span>
<span class="fc" id="L84">                    col = new Colonne&lt;Integer&gt;();                        </span>
<span class="fc" id="L85">                    col.setType(&quot;Integer&quot;);</span>
                    
                }else{
<span class="nc" id="L88">                    col = new Colonne&lt;&gt;();</span>
                }
<span class="fc" id="L90">                datafram.add(col);</span>
<span class="fc" id="L91">                i++;</span>
<span class="fc" id="L92">            }</span>
            
<span class="fc" id="L94">            nbCol = i;</span>
<span class="fc" id="L95">            i=0;</span>
            //Creation des labels
<span class="fc" id="L97">            line = sc.nextLine();</span>
<span class="fc" id="L98">            scLine = new Scanner(line);</span>
<span class="fc" id="L99">            scLine.useDelimiter(&quot;,&quot;);</span>
<span class="fc bfc" id="L100" title="All 2 branches covered.">            while(scLine.hasNext()){</span>
<span class="fc" id="L101">                text = scLine.next();</span>
<span class="fc" id="L102">                Colonne col = datafram.get(i);</span>
<span class="fc" id="L103">                col.setLabel(text);</span>
<span class="fc" id="L104">                i++;</span>
<span class="fc" id="L105">            }</span>
            
            
<span class="fc" id="L108">            i=0;</span>
<span class="fc" id="L109">            sc.useDelimiter(&quot;,|\\n&quot;);</span>

<span class="fc bfc" id="L111" title="All 2 branches covered.">            while(sc.hasNext()){</span>
<span class="fc" id="L112">                text = sc.next();</span>
<span class="fc bfc" id="L113" title="All 2 branches covered.">                if(i == nbCol){</span>
<span class="fc" id="L114">                    i=0;</span>
                }
                
                
<span class="fc" id="L118">                Colonne col2 = datafram.get(i);</span>
<span class="fc bfc" id="L119" title="All 2 branches covered.">                if(col2.getType().equals(&quot;Integer&quot;)){</span>
<span class="fc" id="L120">                    col2.add(Integer.parseInt(text));</span>
<span class="pc bpc" id="L121" title="1 of 2 branches missed.">                }else if(col2.getType().equals(&quot;String&quot;)){</span>
<span class="fc" id="L122">                    col2.add(text);</span>
                }
<span class="fc" id="L124">                i++;</span>
                
<span class="fc" id="L126">            }</span>
<span class="fc" id="L127">            sc.close(); </span>
<span class="nc" id="L128">        }catch(Exception e){</span>
<span class="nc" id="L129">            e.printStackTrace();</span>
<span class="fc" id="L130">        }</span>
<span class="fc" id="L131">        }</span>


        public void printf(ArrayList&lt;Colonne&gt; dat){
            //On suppose que les colonnes font toutes la meme taille
<span class="fc" id="L136">            String titleTemplate = &quot;%-20s &quot;;</span>
<span class="fc" id="L137">            int columnSize = dat.get(0).getSize();</span>
<span class="fc" id="L138">            int nbColonnes = dat.size();</span>
            int currentLine;

            //On parcours chaque ligne de chaque colonne et on l'affiche
            //Affichage des label
<span class="fc bfc" id="L143" title="All 2 branches covered.">            for(int i=0;i&lt;nbColonnes;i++){</span>
<span class="fc" id="L144">                String label = dat.get(i).getLabel();</span>
<span class="fc" id="L145">                System.out.printf(titleTemplate,label+&quot; &quot;);</span>
            }
<span class="fc" id="L147">            System.out.println();</span>

            //Affichages des colonnes            
<span class="fc bfc" id="L150" title="All 2 branches covered.">            for(currentLine=0;currentLine&lt;columnSize;currentLine++){</span>
<span class="fc bfc" id="L151" title="All 2 branches covered.">                for(int j=0;j&lt;nbColonnes;j++){</span>
<span class="fc" id="L152">                    System.out.printf(titleTemplate,dat.get(j).get(currentLine));</span>
                }
<span class="fc" id="L154">                System.out.println();</span>
                
            }
<span class="fc" id="L157">        }</span>

        //Affiche les 5 dernieres lignes
        public void tail(){
<span class="fc" id="L161">            String titleTemplate = &quot;%-20s &quot;;</span>
<span class="fc" id="L162">            int columnSize = datafram.get(0).getSize();</span>
<span class="fc" id="L163">            int nbColonnes = datafram.size();</span>
            int currentLine;

            //On parcours chaque ligne de chaque colonne et on l'affiche
            //Affichage des label
<span class="fc bfc" id="L168" title="All 2 branches covered.">            for(int i=0;i&lt;nbColonnes;i++){</span>
<span class="fc" id="L169">                String label = datafram.get(i).getLabel();</span>
<span class="fc" id="L170">                System.out.printf(titleTemplate,label+&quot; &quot;);</span>
            }
<span class="fc" id="L172">            System.out.println();</span>

            //Affichages des colonnes            
<span class="fc bfc" id="L175" title="All 2 branches covered.">            for(currentLine=columnSize-5;currentLine&lt;columnSize;currentLine++){</span>
<span class="fc bfc" id="L176" title="All 2 branches covered.">                for(int j=0;j&lt;nbColonnes;j++){</span>
<span class="fc" id="L177">                    System.out.printf(titleTemplate,datafram.get(j).get(currentLine));</span>
                }
<span class="fc" id="L179">                System.out.println();</span>
                
            }

<span class="fc" id="L183">        }</span>

        //Affiche les n dernieres lignes
        public void tail(int n){
<span class="fc" id="L187">            String titleTemplate = &quot;%-20s &quot;;</span>
<span class="fc" id="L188">            int columnSize = datafram.get(0).getSize();</span>
<span class="fc" id="L189">            int nbColonnes = datafram.size();</span>
            int currentLine;

            //On parcours chaque ligne de chaque colonne et on l'affiche
            //Affichage des label
<span class="fc bfc" id="L194" title="All 2 branches covered.">            for(int i=0;i&lt;nbColonnes;i++){</span>
<span class="fc" id="L195">                String label = datafram.get(i).getLabel();</span>
<span class="fc" id="L196">                System.out.printf(titleTemplate,label+&quot; &quot;);</span>
            }
<span class="fc" id="L198">            System.out.println();</span>

            //Verification index &gt;0
<span class="fc" id="L201">            int resOk = columnSize-n;</span>
<span class="fc bfc" id="L202" title="All 2 branches covered.">            if(resOk&lt;0){</span>
<span class="fc" id="L203">                resOk=0;</span>
            }   
            //Affichages des colonnes    
<span class="fc bfc" id="L206" title="All 2 branches covered.">            for(currentLine=resOk;currentLine&lt;columnSize;currentLine++){</span>
<span class="fc bfc" id="L207" title="All 2 branches covered.">                for(int j=0;j&lt;nbColonnes;j++){</span>
<span class="fc" id="L208">                    System.out.printf(titleTemplate,datafram.get(j).get(currentLine));</span>
                }
<span class="fc" id="L210">                System.out.println();</span>
                
            }

<span class="fc" id="L214">        }</span>

        //Affiche les 5 premieres lignes
        public void head(){
<span class="fc" id="L218">            String titleTemplate = &quot;%-20s &quot;;</span>
<span class="fc" id="L219">            int columnSize = datafram.get(0).getSize();</span>
<span class="pc bpc" id="L220" title="1 of 2 branches missed.">            if(columnSize&gt;5){</span>
<span class="nc" id="L221">                columnSize=5;</span>
            }
<span class="fc" id="L223">            int nbColonnes = datafram.size();</span>
            
            int currentLine;

            //On parcours chaque ligne de chaque colonne et on l'affiche
            //Affichage des label
<span class="fc bfc" id="L229" title="All 2 branches covered.">            for(int i=0;i&lt;nbColonnes;i++){</span>
<span class="fc" id="L230">                String label = datafram.get(i).getLabel();</span>
<span class="fc" id="L231">                System.out.printf(titleTemplate,label+&quot; &quot;);</span>
            }
<span class="fc" id="L233">            System.out.println();</span>

            //Affichages des colonnes            
<span class="fc bfc" id="L236" title="All 2 branches covered.">            for(currentLine=0;currentLine&lt;columnSize;currentLine++){</span>
<span class="fc bfc" id="L237" title="All 2 branches covered.">                for(int j=0;j&lt;nbColonnes;j++){</span>
<span class="fc" id="L238">                    System.out.printf(titleTemplate,datafram.get(j).get(currentLine));</span>
                }
<span class="fc" id="L240">                System.out.println();</span>
                
            }

<span class="fc" id="L244">        }</span>

        //Affiche les n premieres lignes
        public void head(int n){
<span class="fc" id="L248">            String titleTemplate = &quot;%-20s &quot;;</span>
<span class="fc" id="L249">            int columnSize = datafram.get(0).getSize();;</span>
<span class="fc bfc" id="L250" title="All 2 branches covered.">            if(n&lt;columnSize){</span>
<span class="fc" id="L251">                columnSize = n;</span>
            }
<span class="fc" id="L253">            int nbColonnes = datafram.size();</span>
            int currentLine;

            //On parcours chaque ligne de chaque colonne et on l'affiche
            //Affichage des label
<span class="fc bfc" id="L258" title="All 2 branches covered.">            for(int i=0;i&lt;nbColonnes;i++){</span>
<span class="fc" id="L259">                String label = datafram.get(i).getLabel();</span>
<span class="fc" id="L260">                System.out.printf(titleTemplate,label+&quot; &quot;);</span>
            }
<span class="fc" id="L262">            System.out.println();</span>

            //Affichages des colonnes            
<span class="fc bfc" id="L265" title="All 2 branches covered.">            for(currentLine=0;currentLine&lt;columnSize;currentLine++){</span>
<span class="fc bfc" id="L266" title="All 2 branches covered.">                for(int j=0;j&lt;nbColonnes;j++){</span>
<span class="fc" id="L267">                    System.out.printf(titleTemplate,datafram.get(j).get(currentLine));</span>
                }
<span class="fc" id="L269">                System.out.println();</span>
                
            }

<span class="fc" id="L273">        }</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.6.202009150832</span></div></body></html>